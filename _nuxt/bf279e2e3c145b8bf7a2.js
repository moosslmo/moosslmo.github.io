(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{698:function(e,t,n){var content=n(705);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(106).default)("72541fd0",content,!0,{sourceMap:!1})},704:function(e,t,n){"use strict";var r=n(698);n.n(r).a},705:function(e,t,n){(e.exports=n(105)(!1)).push([e.i,".user[data-v-141c844f]{display:grid}.user__message[data-v-141c844f]{position:absolute;display:inline-block;-webkit-transform-origin:bottom center;transform-origin:bottom center;-webkit-transform:translateX(-50%) translateY(calc(-100% - 58px));transform:translateX(-50%) translateY(calc(-100% - 58px));background-color:#ddd;border-radius:8px;padding:4px 8px;max-width:150px}.user__message.new[data-v-141c844f]{-webkit-animation:popup-data-v-141c844f .15s cubic-bezier(.175,.885,.32,1.275);animation:popup-data-v-141c844f .15s cubic-bezier(.175,.885,.32,1.275)}.user__avatar[data-v-141c844f]{position:absolute;cursor:none;border-radius:100%}.user__name[data-v-141c844f]{position:absolute;-webkit-transform:translateX(-50%) translateY(55px);transform:translateX(-50%) translateY(55px)}@-webkit-keyframes popup-data-v-141c844f{0%{-webkit-transform:scale(0) translateX(-50%) translateY(calc(-100% - 58px));transform:scale(0) translateX(-50%) translateY(calc(-100% - 58px))}to{-webkit-transform:scale(1) translateX(-50%) translateY(calc(-100% - 58px));transform:scale(1) translateX(-50%) translateY(calc(-100% - 58px))}}@keyframes popup-data-v-141c844f{0%{-webkit-transform:scale(0) translateX(-50%) translateY(calc(-100% - 58px));transform:scale(0) translateX(-50%) translateY(calc(-100% - 58px))}to{-webkit-transform:scale(1) translateX(-50%) translateY(calc(-100% - 58px));transform:scale(1) translateX(-50%) translateY(calc(-100% - 58px))}}",""])},712:function(e,t,n){"use strict";var r={props:["message","x","y","avatar","name","face","isFace"],data:function(){return{width:100}},watch:{message:function(e){var t=this;this.$refs.message&&this.$refs.message.classList.add("new"),setTimeout(function(){return t.$refs.message.classList.remove("new")},150)}}},c=(n(704),n(70));Object(c.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user"},[e.message?n("div",{ref:"message",staticClass:"user__message",style:{left:e.x+"px",top:e.y+"px"}},[e._v("\n    "+e._s(e.message)+"\n  ")]):e._e(),e._v(" "),n("img",{staticClass:"user__avatar",style:{left:e.x-e.width/2+"px",top:e.y-e.width/2+"px"},attrs:{src:e.isFace?e.face:e.avatar,width:e.width}}),e._v(" "),n("div",{staticClass:"user__name",style:{left:e.x+"px",top:e.y+"px"}},[e._v("\n    "+e._s(e.name)+"\n  ")])])},[],!1,null,"141c844f",null).exports},733:function(e,t,n){var content=n(862);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(106).default)("5e6f5782",content,!0,{sourceMap:!1})},861:function(e,t,n){"use strict";var r=n(733);n.n(r).a},862:function(e,t,n){(e.exports=n(105)(!1)).push([e.i,".container[data-v-8151cadc]{display:grid;height:100%;width:100%;cursor:none;overflow:hidden}.container .auth__container[data-v-8151cadc]{position:absolute;display:grid;height:100%;width:100%;background-color:rgba(0,0,0,.3)}.container .auth__container .github-login[data-v-8151cadc]{justify-self:center;align-self:center;cursor:pointer;height:60px}.container .input__container[data-v-8151cadc]{position:absolute;display:grid;width:100%;height:100%;overflow:hidden}.container .input__container .input[data-v-8151cadc]{display:inline-block;width:300px;height:50px;justify-self:center;align-self:center;border-radius:4px;-webkit-animation:popdown-data-v-8151cadc .25s cubic-bezier(.215,.61,.355,1) both;animation:popdown-data-v-8151cadc .25s cubic-bezier(.215,.61,.355,1) both}.container .input__container .input[data-v-8151cadc]:focus{-webkit-animation:popup-data-v-8151cadc .2s cubic-bezier(.175,.885,.32,1.275) both;animation:popup-data-v-8151cadc .2s cubic-bezier(.175,.885,.32,1.275) both}.container .anounce[data-v-8151cadc]{position:absolute;text-align:center;width:100%}@-webkit-keyframes popup-data-v-8151cadc{0%{-webkit-transform:scale(0);transform:scale(0)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes popup-data-v-8151cadc{0%{-webkit-transform:scale(0);transform:scale(0)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes popdown-data-v-8151cadc{0%{-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:scale(0);transform:scale(0)}}@keyframes popdown-data-v-8151cadc{0%{-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:scale(0);transform:scale(0)}}canvas[data-v-8151cadc],video[data-v-8151cadc]{display:none}",""])},871:function(e,t,n){"use strict";n.r(t);n(146);var r,c=n(35),o=n(48),l=n(148),d=(n(712),{data:function(){return{user:null,uid:null,me:null,inputText:"",isInputFocus:!1,isFace:!1,timer:null}},firebase:function(){return{users:l.a.ref("users")}},created:function(){var e=this;window.FaceDetector&&(r=new window.FaceDetector({fastMode:!0})),r&&this.$message.warn('Go to "chrome://flags/" and enable "Experimental Web Platform features" for face detection API.',10),l.b.auth().onAuthStateChanged(function(t){t&&(console.log(t),e.user=t,e.uid=t.uid,e.me=Object(o.a)({},e.me,{avatar:t.photoURL,name:t.displayName||t.email.substring(0,t.email.lastIndexOf("@")),x:100,y:100}),l.a.ref("users/".concat(e.uid)).set(e.me))}),window.addEventListener("beforeunload",function(t){l.a.ref("users/".concat(e.uid)).set({})}),window.addEventListener("keypress",function(t){if(13===t.keyCode&&e.me)if(e.isInputFocus){if(e.isInputFocus=!1,t.target.blur(),""===e.inputText)return;e.me=Object(o.a)({},e.me,{message:e.inputText}),l.a.ref("users/".concat(e.uid,"/message")).set(e.inputText),l.a.ref("messages").push().set(e.inputText),e.inputText=""}else e.inputText="",e.$refs.input.focus(),e.isInputFocus=!0}),window.addEventListener("keypress",function(){var t=Object(c.a)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(116!==n.keyCode&&12613!==n.keyCode||e.isInputFocus)){t.next=2;break}return t.abrupt("return");case 2:e.isFace?(e.isFace=!1,e.me=Object(o.a)({},e.me,{isFace:e.isFace}),l.a.ref("users/".concat(e.uid)).set(e.me),clearInterval(e.timer)):(e.cameraOn(),e.isFace=!0,e.timer=setInterval(function(){r.detect(e.$refs.video).then(function(t){if(t[0]){var n=t[0].boundingBox,r=n.x,c=n.y,d=n.width,f=n.height,m=d/3;e.$refs.canvas.getContext("2d").drawImage(e.$refs.video,r-m,c-m,d+2*m,f+2*m,0,0,100,100);var base=e.$refs.canvas.toDataURL("image/jpeg",.5);e.me=Object(o.a)({},e.me,{face:base,isFace:e.isFace}),l.a.ref("users/".concat(e.uid)).set(e.me)}})},100));case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},methods:{mousemove:function(e){(this.user||this.uid)&&(this.me=Object(o.a)({},this.me,{x:e.pageX,y:e.pageY}),l.a.ref("users/".concat(this.uid)).set(this.me))},clickOutside:function(e){this.isInputFocus=!1,e.target.blur()},login:function(){var e=Object(c.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.auth().signInWithPopup(new l.b.auth.GithubAuthProvider);case 2:t=e.sent,this.user=t.user,this.uid=t.user.uid,this.me=Object(o.a)({},this.me,{avatar:t.user.photoURL,name:t.user.displayName||t.user.email.substring(0,t.user.email.lastIndexOf("@")),x:0,y:0}),l.a.ref("users/".concat(this.uid)).set(this.me);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),cameraOn:function(){var video=this.$refs.video;navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){video.onloadedmetadata=function(e){return video.play()},video.srcObject=e})}},computed:{userList:function(){return this.users.map(function(e){var t=Object(o.a)({},e);return delete t[".key"],t})}},components:{}}),f=(n(861),n(70)),component=Object(f.a)(d,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",style:!e.me&&{cursor:"default"},on:{mousemove:e.mousemove,click:e.clickOutside}},[e._l(e.userList,function(t){return n("User",e._b({key:t.avatar},"User",t,!1))}),e._v(" "),e.me?n("User",e._b({},"User",e.me,!1)):e._e(),e._v(" "),n("div",{staticClass:"input__container"},[n("a-input",{ref:"input",staticClass:"input",attrs:{size:"large",placeholder:"Say Something!"},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}})],1),e._v(" "),e.user?e._e():n("div",{staticClass:"auth__container"},[n("img",{staticClass:"github-login",attrs:{src:"/github-login.png"},on:{click:e.login}})]),e._v(" "),n("div",{staticClass:"anounce",domProps:{innerHTML:e._s(e.me?"<b>Enter</b> - Chat, <b>T</b> - Toggle Avatar (ON/OFF Camera)":"Sign in")}}),e._v(" "),n("video",{ref:"video",attrs:{width:"480",height:"360"}}),e._v(" "),n("canvas",{ref:"canvas",attrs:{width:"100",height:"100"}})],2)},[],!1,null,"8151cadc",null);t.default=component.exports}}]);